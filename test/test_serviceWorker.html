<!doctype html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1" />
  <title>Service worker test</title>
  <script src="./testUtils.js"></script>
</head>
<h1>Service worker test</h1>
<script>
initTestDivs();

async function registerServiceWorker() {
  if (!'serviceWorker' in navigator) {
    console.warn("navigator.serviceWorker not found");
    return Promise.reject("serviceWorker not supported");
  }
  try {
    const registration = await navigator.serviceWorker.register("/serviceWorker.js", { scope: "/", });
    if (registration) {
      registration.addEventListener('updatefound', () => {
        console.log('serviceWorker.updatefound');
      });
      if (registration.installing) {
        console.log("client: Service worker installing");
      } else if (registration.waiting) {
        console.log("client: Service worker installed");
      } else if (registration.active) {
        console.log("client: Service worker active");
      }

    }
  } catch (error) {
    console.error(`Registration failed with ${error}`);
  }
}

registerServiceWorker();
</script>